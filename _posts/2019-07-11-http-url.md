---
published: true
layout: single
title: "[HTTP] URL과 리소스"
category: TIL
comments: true
---

## URI, URL, URN

URL은 어디서 들어본 것 같기도 하고, URI어쩌고 하던데 뭐가 다른거야?

### Resource

리소스. 자원이란 뜻이다. html 파일, 이미지 파일, 바이너리 파일 등 그야말로 자원을 의미한다. 

어떤 자원을 원하는 사용자는, 서버에 어떻게 요청할 수 있을까? 

> 사용자 : 내가 원하는 건 사진인데, 음, 그러니까 깔끔하면서도 화려하고 vivid한 색감을 가지면서도 너무 튀지는 않는, 그런 사진 좀 줘봐.
>
> 서버 : 껒

서로간에 의사 전달을 위해서는  **원하는 자원을 구체적으로 기술해야 함** 을 쉽게 알 수 있다. 여기에 더해서 자원이 엄청나게 많음을 어렵지 않게 상상할 수 있을 것이다. 웹에서는 하루 몇 백억건의 요청과 응답이 오간다고 한다. 수많은 사이트들이 존재한다. 사이트 내부에는 그림파일, html파일, 동영상 파일… 엄청나게 많은 자원이 존재할 것이다. 웹은 어떻게 이 자원을 관리하고 있을까?

### URI

> Uniform Resource Identifier  
> 통합 자원 식별자

URI는 어떤 자원을 UNIQUE하게 구별하기 위한 주소다. 여기서 **UNIQUE** 하게 구분하는 방법이 **위치** 인지 **자원이름** 인지에 따라 URL과 URN으로 나뉜다.

### URN

> Uniform Resource Name
>
> 자원의 이름으로 식별

```
<URN> ::= "urn:" <NID> ":" <NSS>
```

URN은 위치에 상관없이 자원 그 자체로 식별하는 특징이 있다. 네이버에 있던 이미지가 다음으로 옮겨가도, URN은 **변하지 않는다**. 자원이 네이버에 위치하든, 다음에 위치하든 URN에는 영향이 없다.

이 장점 때문에 URN을 도입하기 위한 시도가 있지만, 알다시피 URL로 이루어져 있어 이전이 쉽지 않다.



### URL

> Uniform Resource Location
>
> 자원의 위치로 식별

자원을 **위치** 로 식별하는 URI를 URL이라고 한다. 웹에서 어떤 파일을 다운로드 받았다고 생각해 보자. 그 파일을 열려면 어떻게 할까? 해당 폴더로 가서 더블클릭하면 되자나? 음… C 드라이브, 사용자, 다운로드, image.png? 

```
C:\\Users\\andole\\Downloads\image.png
```

그렇다! 컴퓨터 파일 시스템이 URL과 아주 흡사하다. 

## URL 문법

```
<스킴> :// <사용자> : <비밀번호> @ <호스트> : <포트> / <경로> ; <파라미터> ? <질의> #. <프래그먼트>
```

**반드시** 순서를 지켜야 한다.

| <img width=200px/>구분 |                                                                                                                        |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| 스킴                   | 어떤 프로토콜을 사용하는가? `http`, `https`,`ftp`, `rtsp`, `file` … 등등이 올 수 있다. 이어서 나오는 자원 정보가 어떤 프로토콜로 접근하는지 정의한다.                |
| 사용자 이름, 비밀번호         | 공용 자원이 아닌 경우, 몇몇 프로토콜은 계정과 비밀번호를 요구하기도 한다. 예)FTP                                                                       |
| 호스트                  | **서버** 를 뜻한다. naver.com, daum.net, google.com ...                                                                      |
| 포트                   | 서버에 접근하기 위한 포트를 정의한다. 잘 알려진 포트의 경우 생략할 수 있다. (브라우저가 스킴을 보고 자동으로 붙여준다) HTTP는 80, HTTPS는 443, FTP는 21, SFTP는 22 ...      |
| 경로                   | 호스트 내부에서 자원의 위치를 기술한다. 위에서 설명한 파일시스템과 유사한 방식이다. /baseball/kiwoom/1, /java/spring/starter ...                           |
| 파라미터                 | 자원을 정의하기 위한 키 / 밸류 조합. FTP에서는 바이너리, 텍스트 포맷이 있다. `type`파라미터가 i인 경우 바이너리를, a 인 경우 ASCII 포맷이다. `ftp://foo.org/bar;type=i` |
| 질의 (쿼리스트링)           | 자원의 형식을 구체화 하기 위해 질의를 포함할 수 있다. `naver.com/book/search?title=HTTP` 는 도서 리스트 중에서 `title`이 `HTTP` 인 것을 요청할 수 있다.         |
| 프래그먼트                | HTML 문서의 위치를 설명한다. #[TITLE]은 TITLE 섹션을 의미한다.                                                                           |



## 상대 URL

URL은 상대 URL과 절대 URL로 나눈다. 

절대 URL은 위에서 살펴본 URL 문법에 맞게 항목을 기술한 것을 말한다.

상대 URL은 URL의 일부만 기술한다. 스킴에서 포트까지를 `base URL`이라고 하는데, 상대 URL은 `base URL` 이후 URL을 기술한다.  

```
// Absolute URL
https://github.com/andole87/some-repo

// Relative URL
// github.com에 접속
https://github.com
// github.com에 접속 중일 때
/some-repo
```



## URL 인코딩 체계

크롬 주소창에 한글을 입력해 본 적 있는가? 잘 작동하던가? 잘 작동했을 것이다. 주소창에 "웹"을 검색해보자.  
브라우저에서는 이렇게 표시될 것이다.

```
https://www.google.com/search?q=웹[.....]
```

한글로 잘 표시될 것이다. 자, 이제 주소를 복사해서 메모장에 붙여넣어보자.

```
https://www.google.com/search?q=%EC%9B%B9&oq=%EC%9B%B9&aqs=chrome..69i57j0l3j69i61j0.610j0j9&sourceid=chrome&ie=UTF-8
```

난다? `q=웹`이 `q=%EC%9B%B9`로 바뀌었다? 

URL은 US-ASCII 문자 집합으로만 표시할 수 있다. 그 외 알파벳이나 한글, 한자 등은 URL에서 표시할 수 없는 것이다. 이 때문에 이스케이프 문자로 다른 문자셋을 표시한다. 위에서 알 수 있듯이 유니코드 인코딩 이스케이프 문자는 `%`이다.

브라우저는 똑똑해서 이스케이프 문자를 자동 디코딩 해주지만, 실제 URL을 기술할 때는 영어 알파벳만 가능하다.

이처럼, URL에는 `들어갈 수 없는` 문자들이 있다. 

```
% / . .. # ? ; : $ , + @ & = {} | \ ~ [] ` <> "
```